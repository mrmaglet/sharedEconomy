(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[435],{67:function(){},2061:function(){},5725:function(e,t,r){Promise.resolve().then(r.bind(r,8080))},8080:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return M}});var a=r(7437),s=r(8757),l=r(3167),n=r(1367);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,l.W)(t))}let i=e=>{let{callback:t,className:r}=e;return(0,a.jsxs)("div",{className:o("border-gray-200 border-2 border-dotted bg-sky-100 p-4 rounded-md",r),onDrop:function(e){e.stopPropagation(),e.preventDefault();let r=e.dataTransfer.files[0],a=new FileReader;a.readAsArrayBuffer(r),a.onload=function(e){var r;if(!(null==e?void 0:null===(r=e.target)||void 0===r?void 0:r.result))return;let a=e.target.result;a.constructor===ArrayBuffer&&t(a)},a.onerror=function(e){var t;console.error("File could not be read!",null===(t=e.target)||void 0===t?void 0:t.error)}},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},children:["Drop ",(0,a.jsx)("br",{})," Zone"]})};var d=r(2265);let c=d.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:o("w-full caption-bottom text-sm",r),...s})})});c.displayName="Table",d.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:o("[&_tr]:border-b",r),...s})}).displayName="TableHeader";let u=d.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:o("[&_tr:last-child]:border-0",r),...s})});u.displayName="TableBody";let x=d.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:o("border-t bg-slate-100/50 font-medium [&>tr]:last:border-b-0 dark:bg-slate-800/50",r),...s})});x.displayName="TableFooter";let f=d.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:o("border-b transition-colors hover:bg-slate-100/50 data-[state=selected]:bg-slate-100 dark:hover:bg-slate-800/50 dark:data-[state=selected]:bg-slate-800",r),...s})});f.displayName="TableRow",d.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:o("h-10 px-2 text-left align-middle font-medium text-slate-500 [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px] dark:text-slate-400",r),...s})}).displayName="TableHead";let m=d.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:o("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...s})});m.displayName="TableCell",d.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:o("mt-4 text-sm text-slate-500 dark:text-slate-400",r),...s})}).displayName="TableCaption";let h=e=>Number((Math.round(100*e.reduce((e,t)=>e+=t.amount,0))/100).toFixed(0)),b=e=>Number((Math.round(100*e)/100).toFixed(0)),p=e=>{let{transactions:t}=e;return(0,a.jsx)(x,{children:(0,a.jsxs)(f,{children:[(0,a.jsx)(m,{colSpan:2,children:"Total"}),(0,a.jsx)(m,{className:"text-right",children:h(t)})]})})};function v(e){return(0,a.jsx)("h3",{...e,className:o(e.className,"scroll-m-20 text-2xl font-semibold tracking-tight"),children:e.children})}let j=e=>{let{headline:t,transactions:r,labels:s,...l}=e;return(0,a.jsxs)("div",{...l,children:[t&&(0,a.jsx)(v,{className:"",children:t}),(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{children:r.map(e=>{if(e.labels===s)return(0,a.jsxs)(f,{children:[(0,a.jsx)(m,{children:e.date}),(0,a.jsx)(m,{children:e.description}),(0,a.jsx)(m,{className:"text-right",children:b(e.amount)})]},"".concat(e.date).concat(e.description).concat(e.amount))})}),(0,a.jsx)(p,{transactions:r.filter(e=>e.labels===s)})]})]})};var g=r(4323);let N=d.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:o("flex h-9 w-full rounded-md border border-slate-200 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-slate-950 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-800 dark:placeholder:text-slate-400 dark:focus-visible:ring-slate-300",r),ref:t,...l})});N.displayName="Input";var y=r(2406);let w=(0,r(7742).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),k=d.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(y.f,{ref:t,className:o(w(),r),...s})});k.displayName=y.f.displayName;var A=r(7807);let R=(0,A.cn)(""),D=(0,A.cn)(""),C=(0,A.cn)(void 0),F=(0,A.cn)(void 0),T=()=>{let[e,t]=(0,s.useAtom)(R),[r,l]=(0,s.useAtom)(D),[n,o]=(0,s.useAtom)(C),[i,d]=(0,s.useAtom)(F);return(0,a.jsxs)("div",{className:"flex gap-y-4 flex-col",children:[(0,a.jsxs)("div",{className:"flex gap-x-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(k,{children:"Person 1"}),(0,a.jsx)(N,{type:"text",value:e,onChange:e=>t(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(k,{children:"L\xf6n"}),(0,a.jsx)(N,{type:"number",value:n,onChange:e=>o(Number(e.target.value)||void 0)})]})]}),(0,a.jsxs)("div",{className:"flex flex gap-x-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(k,{children:"Person 2"}),(0,a.jsx)(N,{type:"text",value:r,onChange:e=>l(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(k,{children:"L\xf6n"}),(0,a.jsx)(N,{type:"number",value:i,onChange:e=>d(Number(e.target.value)||void 0)})]})]})]})},_=(0,A.cn)([]),P=()=>{let[e,t]=(0,s.useAtom)(R),[r,l]=(0,s.useAtom)(D),[n,o]=(0,s.useAtom)(C),[i,d]=(0,s.useAtom)(F),c=((e,t,r)=>{let a=t+r;return{person1:t/a*e,person2:r/a*e}})(h((0,s.useAtomValue)(_).filter(e=>"Dela Ani"===e.labels||"Dela Magnus"===e.labels))||0,n||0,i||0);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"mt-8 flex flex-col",children:[(0,a.jsxs)("div",{children:[e||"Person 1"," should pay: ",b(c.person1||0)]}),(0,a.jsxs)("div",{children:[r||"Person 2"," should pay: ",b(c.person2||0)]})]})})};var M=()=>{let[e,t]=(0,s.useAtom)(_);return(0,a.jsxs)("div",{className:"container my-10",children:[(0,a.jsx)(i,{callback:e=>{let r;t((r=e,{getFirstSheet:function(){return r=(r=(0,g.ij)(e)).Sheets[r.SheetNames[0]],r=g.P6.sheet_to_json(r,{header:1}),this},stripFirstNrRows:function(e){return r=r.filter((t,r)=>r>e&&t),this},createColumns:function(){return r=r.map(e=>({date:e[0],card:e[1],description:e[4],amount:e[5]})),this},setLabels:function(){return r=r.map(e=>{var t;let r="";return(null==e?void 0:null===(t=e.description)||void 0===t?void 0:t.startsWith("CRV*"))?r="Magnus privat":"Extrakort"===e.card?r="Dela Ani":"Huvudkort"===e.card&&(r="Dela Magnus"),{...e,labels:r}}).filter(e=>e.labels),this},getValue:function(){return r}}).getFirstSheet().stripFirstNrRows(5).createColumns().setLabels().getValue())},className:"mb-8"}),(0,a.jsx)(T,{}),(0,a.jsx)(P,{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{style:{width:"fit-content"},children:(null==e?void 0:e.length)>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex gap-10 flex-wrap",children:[(0,a.jsx)(j,{headline:"Extrakort",transactions:e,labels:"Dela Ani"}),(0,a.jsx)(j,{headline:"Huvudkort",transactions:e,labels:"Dela Magnus"}),(0,a.jsx)(j,{className:"hidden",headline:"Privat",transactions:e,labels:"Magnus privat"})]}),(0,a.jsx)(p,{transactions:e.filter(e=>"Dela Ani"===e.labels||"Dela Magnus"===e.labels)})]})})]})}}},function(e){e.O(0,[425,757,174,971,69,744],function(){return e(e.s=5725)}),_N_E=e.O()}]);